{% extends "main.html" %}

{%block title%}
U≈æivatel√©
{%endblock%}

{% block styles %}
{%load static%}
    <link rel="stylesheet" href="{% static 'styles/uzivatele.css' %}">
{% endblock %}

{%block content%}
    {%if request.user.role == "admin"%}
    <!--tahle classka table dƒõl√° automatick√Ω css styl, je to z knihovny bootstrap
    https://www.w3schools.com/bootstrap/bootstrap_tables.asp
    P≈ô√≠jde mi to super na stylov√°n√≠ a vlastnƒõ nic moc ne≈ôe≈°√≠≈° a dƒõl√° to vƒõci za tebe.-->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
    <form method="GET" action="{% url 'uzivatele' %}" class="search-form">
        <input type="text" name="q" value="{{ query }}" placeholder="Hledat u≈æivatele..." class="search-input">
        <button type="submit" class="btn btn-primary">üîç Hledat</button>
    </form>
        <table class="table">
            <tr>
                <th>
                    #
                </th>
                <th>
                    Jm√©no
                </th>
                <th>
                    P≈ô√≠jmen√≠
                </th>
                <th>
                    T≈ô√≠da
                </th>
                <th>
                    Email
                </th>
                <th>
                    
                </th>
            </tr>
        {%for user in users%}
            <tr>
                <td>
                    {{forloop.counter}}
                </td>
                <td>
                    {{user.jmeno}}
                </td>
                <td>
                    {{user.prijmeni}}
                </td>
                <td>
                    {{user.trida}}
                </td>
                <td>
                    {{user.email}}
                </td>
                <td>
                    {% if request.user.role == "admin"%}
                        <form action="{% url 'odstranit_uzivatele' user.pk %}" method="post" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger" onclick="return confirm('Opravdu chcete smazat tohoto u≈æivatele?')">
                                ‚ùå
                            </button>
                            
                        </form>
                    {% endif %}
                </td>
            </tr>
        {%endfor%}
        </table>
    {%else%}
        <h1>Nejste administr√°tor!</h1>
    {%endif%}
{%endblock%}